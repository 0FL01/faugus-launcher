# Отчёт о состоянии миграции Faugus Launcher (Python → Rust)

**Дата анализа:** 15 января 2026 г.
**Цель:** Оценка прогресса переписывания лаунчера с Python (GTK3) на Rust (Iced).

---

### 1. Общее состояние проекта

Процесс миграции находится в **продвинутой стадии (готовность ~75-80%)**.
Существует файл `FEATURE_PARITY.md` (последнее обновление от 15.01.2025), который оценивал готовность в 60.4%, однако анализ исходного кода показал, что с тех пор был достигнут значительный прогресс. Реализованы многие функции, отмеченные ранее как "отсутствующие".

### 2. Детальный разбор функционала

#### ✅ Полностью реализовано (Rust)
Следующие модули перенесены и функционируют на уровне паритета с Python-версией:

*   **Ядро приложения**:
    *   Загрузка и сохранение конфигурации (`src/config/`).
    *   Система локализации (i18n) с поддержкой всех языков (`src/locale/`).
    *   Управление путями XDG и структурой директорий.
*   **Графический интерфейс (GUI)**:
    *   Главное окно со списками игр (List, Grid, Banners).
    *   Диалоги добавления/редактирования игр.
    *   Диалог настроек.
    *   **Просмотрщик логов** (`src/gui/log_viewer_dialog.rs`) — реализован (ранее считался отсутствующим).
*   **Запуск игр (`src/launcher/`)**:
    *   Полная интеграция с **UMU-Launcher**.
    *   Настройка окружения: `WINEPREFIX`, `PROTONPATH`.
    *   Поддержка опций: **MangoHud**, **GameMode**, `disable_hidraw`, переменные окружения для HDR и Wayland.
    *   Отслеживание процессов (PID) и их принудительное завершение.
*   **Системный трей (`src/tray/`)**:
    *   Полностью реализован модуль трея (иконка, меню, уведомления).
    *   Поддерживается сворачивание/разворачивание окна.
*   **Интеграция со Steam**:
    *   Чтение и запись `shortcuts.vdf`.
    *   Добавление сторонних игр в Steam.

#### ⚠️ Частично реализовано / В работе
*   **Компоненты Античита (`src/utils/components.rs`)**:
    *   Загрузка и обновление `UMU-Launcher` реализованы.
    *   Функции для **EAC** (Easy Anti-Cheat) и **BattlEye** присутствуют в виде заглушек (`TODO: Download ...`), логика загрузки пока отсутствует.
*   **Proton Manager**:
    *   GUI реализован, но функционал авто-обновления до последней версии Proton пока не найден в явном виде (как отдельная автоматическая задача).

#### ❌ Отсутствует (Не найдено в Rust-коде)
На данный момент в коде Rust не обнаружены следы реализации следующих функций, которые есть в Python-версии:

*   **Авто-обнаружение сторонних лаунчеров**: Логика поиска установленных Battle.net, Epic Games, Ubisoft Connect и т.д. отсутствует.
*   **Инструменты префикса**: Нет кода для запуска `winetricks`, `winecfg` или открытия директории префикса через GUI.
*   **Продвинутое управление файлами**: В Python версии использовались нативные диалоги GTK, в Rust (Iced) с этим есть сложности, используются свои реализации или простые поля ввода.

### 3. Сравнение архитектуры (Python vs Rust)

| Характеристика | Python (Текущая версия) | Rust (Новая версия) |
| :--- | :--- | :--- |
| **GUI Фреймворк** | GTK3 (PyGObject) | Iced (Rust-native, Elm-like) |
| **Асинхронность** | Стандартная (синхронный UI + потоки) | Полная асинхронность (`tokio` + `futures`) |
| **Безопасность** | Динамическая типизация | Строгая типизация, обработка ошибок через `anyhow` |
| **Логирование** | Стандартный модуль `logging` | Структурированное логирование `tracing` |
| **Сборка** | Meson + Ninja | Cargo |

### 4. Вывод

Рефакторинг выполнен качественно, код на Rust написан идиоматично (используются современные практики Rust 2021). Основной "скелет" приложения готов и функционален.

**Для достижения полного паритета осталось реализовать:**
1.  Логику загрузки компонентов античитов (EAC/BattlEye).
2.  Авто-сканирование сторонних лаунчеров.
3.  Утилиты для работы с префиксом (Winetricks/Winecfg).

Rust-версия уже пригодна для использования как основной лаунчер, если пользователю не требуются специфические функции управления префиксами прямо из интерфейса.
